<div class="auth">
  <div nz-row nzJustify="center" nzAlign="middle" class="auth__row">
    <div nz-col nzXs="24" nzMd="12" nzLg="6" nzXl="6">
      <div class="auth__form">
        <div class="auth__logo">
          <img src="/assets/images/logo.png" alt="" />
        </div>
        <form nz-form [formGroup]="validateForm" class="login-form" (ngSubmit)="handleRegister()" nzLayout="vertical">
          <nz-alert *ngIf="isSubmitted && isError" nzType="error" nzMessage="{{ errorMessage }}" nzShowIcon class="mb-3"></nz-alert>
          <nz-alert *ngIf="isSubmitted && !isError" nzType="success" nzMessage="Register success!" nzShowIcon class="mb-3"></nz-alert>

          <nz-form-item>
            <nz-form-label nzRequired="true" nzFor="username" class="fw-bold">Email</nz-form-label>
            <nz-form-control [nzErrorTip]="emailErrorTpl">
              <nz-input-group nzPrefixIcon="mail" nzSize="large">
                <input type="text" nz-input formControlName="email" placeholder="Email" size="large" />
                <ng-template #emailErrorTpl let-control>
                  <ng-container *ngIf="control.hasError('email')">The input is not valid Email!</ng-container>
                  <ng-container *ngIf="control.hasError('required')">Please input your Email!</ng-container>
                </ng-template>
              </nz-input-group>
            </nz-form-control>
          </nz-form-item>

          <!-- Password -->
          <nz-form-item>
            <nz-form-label nzRequired="true" nzFor="password" class="fw-bold">Password</nz-form-label>
            <nz-form-control nzErrorTip="Please input your password!">
              <nz-input-group nzPrefixIcon="lock" nzSize="large">
                <input
                  type="password"
                  nz-input
                  formControlName="password"
                  placeholder="Password"
                  size="large"
                  (ngModelChange)="validateConfirmPassword()"
                />
              </nz-input-group>
            </nz-form-control>
          </nz-form-item>

          <!-- Confirm pwd -->
          <nz-form-item>
            <nz-form-label nzRequired="true" nzFor="confirm_password" class="fw-bold">Confirm password</nz-form-label>

            <nz-form-control [nzErrorTip]="confirmErrorTpl">
              <nz-input-group nzPrefixIcon="lock" nzSize="large" [nzSuffix]="suffixTemplate">
                <input type="password" nz-input formControlName="confirm_password" placeholder="Confirm password" size="large" nz-icon />
              </nz-input-group>
              <ng-template #suffixTemplate>
                <span
                  nz-icon
                  nzType="eye"
                ></span>
              </ng-template>
              <ng-template #confirmErrorTpl let-control>
                <ng-container *ngIf="control.hasError('required')">Please input your confirm password! <br /></ng-container>
                <ng-container *ngIf="control.hasError('confirm')">Confirm password do not match!</ng-container>
              </ng-template>
            </nz-form-control>
          </nz-form-item>
          <button nz-button class="fw-bold mt-2" nzType="primary" nzBlock="" nzSize="large">Register</button>
        </form>

        <div class="mt-3">
          <span>Already have an account</span
          ><button nz-button class="fw-bold ps-2" nzType="link" nzSize="large" (click)="router.navigate(['auth/login'])">Log in now</button>
        </div>
      </div>
    </div>
  </div>
</div>

